<!DOCTYPE html>
<html lang="en-us">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Shiny y COLCAP</title>
<meta name="description" content="Mostly what I learn: publish lest I forget. ">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="all,follow">
<meta name="googlebot" content="index,follow,snippet,archive">
<link rel="stylesheet" href="/css/bootstrap.min.css">
<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:400,300,700,400italic">
<link rel="stylesheet" href="/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/owl.carousel.css">
<link rel="stylesheet" href="/css/owl.theme.css">


  <link href="/css/style.red.css" rel="stylesheet" id="theme-stylesheet">

 

  
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  


<link href="/css/custom.css" rel="stylesheet">
<link rel="shortcut icon" href="/img/favicon.png">


</head>
<body>
  <div id="all">
      <div class="container-fluid">
          <div class="row row-offcanvas row-offcanvas-left">
              <div id="sidebar" class="col-xs-6 col-sm-4 col-md-3 sidebar-offcanvas">
  <div class="sidebar-content">
    <h1 class="sidebar-heading"><a href="/">David Salazar</a></h1>
    
      <p class="sidebar-p">My name is David Salazar and I am a guy with a broad range of interests: Data Science, Humanities and everything in between.</p>
    
    <ul class="sidebar-menu">
      
      
        <li><a href="/">Home</a></li>
      
        <li><a href="/about/">About</a></li>
      
        <li><a href="/portfolio/">Blog</a></li>
      
    </ul>
    <p class="social">
  
  
  
  <a href="full%20profile%20url%20in%20twitter" data-animate-hover="pulse" class="external twitter">
    <i class="fa fa-twitter"></i>
  </a>
  
  
  
  <a href="mailto:david_salazarv@example.com" data-animate-hover="pulse" class="email">
    <i class="fa fa-envelope"></i>
  </a>
  
  
  <a href="https://www.linkedin.com/in/david-salazar-007/" data-animate-hover="pulse">
    <i class="fa fa-linkedin"></i>
  </a>
  
  
  <a href="full%20profile%20url%20in%20stackoverflow" data-animate-hover="pulse">
    <i class="fa fa-stack-overflow"></i>
  </a>
  
  
  <a href="https://github.com/David-Salazar" data-animate-hover="pulse">
    <i class="fa fa-github"></i>
  </a>
  
</p>


    <div class="copyright">
      <p class="credit">
        
          &copy;2018 David Salazar
        
        | Template by <a href="https://bootstrapious.com/free-templates" class="external">Bootstrapious.com</a>

&amp; ported to Hugo by <a href="https://github.com/kishaningithub">Kishan B</a>

      </p>
    </div>
  </div>
</div>

              
<div class="col-xs-12 col-sm-8 col-md-9 content-column white-background">
  <div class="small-navbar visible-xs">
  <button type="button" data-toggle="offcanvas" class="btn btn-ghost pull-left"> <i class="fa fa-align-left"> </i>Menu</button>
  <h1 class="small-navbar-heading"><a href="/">David Salazar</a></h1>
</div>

  <div class="row">
    <div class="col-lg-8">
      <div class="content-column-content">
         <h1>Shiny y COLCAP</h1>
         <div id="siguiendo-una-inversion-decepecionante" class="section level1">
<h1>Siguiendo una inversión decepecionante</h1>
<p>El mercado colombiano ha sido una decepción en los últimos cinco años. Para ver qué tan decepcionado debería estar, cree <a href="https://davidsalazarvergara.shinyapps.io/ComparacionMercado/">esta <code>Shiny</code></a> app. Para no ovlidarme de cómo se construyen en el futuro, acá un tutorial breve comentando selecciones del código:</p>
<div id="ui-user-interface" class="section level2">
<h2>ui: User Interface</h2>
<p>En la <code>ui</code> especificamos la organización de los inputs y outputs, aún cuando no hayamos creado estos últimos.</p>
<pre class="r"><code>ui &lt;- fluidPage(
   
   # Application title
   titlePanel(&quot;Comparación de Mercado&quot;),
   
   # Sidebar with a date input
   sidebarLayout( 
     
     dateInput(&quot;fecha_inicial&quot;, &quot;Fecha de inicio de comparación:&quot;, value = &quot;2013-01-01&quot;)
     
     # primer argumento input$fecha_inicial, como nos referiremos a esto en server. 
     
   # Añade todo los input o outputs que quieres que vaya en el sidebar
     
  # Main plot o text 
     
   mainPanel(
     
      h1(&quot;iCOLCAP vs. Renta Fija 4%&quot;), # se pueden usar html tags
      
      tags$b(textOutput(&quot;diff.colcap&quot;)),

      # como nos referimos a esto en server. 
        
      plotlyOutput(&quot;plot_comparison&quot;)</code></pre>
</div>
<div id="server-datos-y-procedimientos" class="section level2">
<h2>server: datos y procedimientos</h2>
<p>Con los inputs especificados en el <code>ui</code>, podemos computar y graficar en el <code>server</code>:</p>
<pre class="r"><code>server &lt;- function(input, output) {}
  # input es lista
  # output también 
  dataInput &lt;- reactive({
    # función a devolver los datos 
     icolcap &lt;- Ad(getSymbols(&quot;ICOL&quot;, src = &quot;yahoo&quot;, from = input$fecha_inicial, to = input$fecha_final, 
                             auto.assign = FALSE))
     
     
  output$ea.colcap &lt;-  renderText({
    
    data &lt;- dataInput()
    time_series &lt;- data[[2]]
    
    # como utilizar dataInput(): dataInput() se utiliza cada vez que cambien inputs. no cada vez que 
    # cambien otros inputs que no sean necesarios.
    
     plot &lt;-  ggplot(data[[1]], aes(x = Fecha, y = valor, color = variable,
                                           text = paste(&quot;Fecha: &quot;, as.Date(Fecha),
                                                        &#39;&lt;br&gt;Valor : &#39;, dollar_d(valor),
                                                        &quot;&lt;br&gt;Diferencia :&quot;, dollar_d(diff)
                                           ), group = 1)) + ## trick from: https://stackoverflow.com/questions/47507186/tooltip-removes-regression-line-ggplotly
       geom_line() +
       hrbrthemes::theme_ipsum() +
       ggthemes::scale_color_gdocs(guide = FALSE) +
       labs(x = &quot;&quot;,
            y = &quot;Inversión a través del tiempo&quot;,
            title = &quot;Inversión en iCOLCAP&quot;) +
       scale_y_continuous(labels= scales::dollar_format()) 
     ggplotly(plot, tooltip = c(&quot;text&quot;))
     
     # &#39;free interactivity&#39; utilizando plotly</code></pre>
</div>
<div id="punto-final" class="section level2">
<h2>Punto final</h2>
<p>Poned el <code>server</code> y el <code>ui</code> juntos:</p>
<pre class="r"><code># Run the application 
shinyApp(ui = ui, server = server)</code></pre>
</div>
</div>
<div id="conclusion" class="section level1">
<h1>Conclusión</h1>
<p>Utilizar <code>Shiny</code> es súper sencillo, como todos los paquetes de RStudio. Una lógica sencilla de implementar con un poco de Google y Stack.</p>
</div>

         
      </div>
    </div>
  </div>
</div>

          </div>
      </div>
  </div>
  <script src="/js/jquery.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/jquery.cookie.js"> </script>
<script src="/js/ekko-lightbox.js"></script>
<script src="/js/jquery.scrollTo.min.js"></script>
<script src="/js/masonry.pkgd.min.js"></script>
<script src="/js/imagesloaded.pkgd.min.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/front.js"></script>

</body>
</html>
