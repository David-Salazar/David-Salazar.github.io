<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.262">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="">
<meta name="dcterms.date" content="2020-05-12">

<title>David Salazar - Statistical Rethinking: Week 5 -&gt; Interactions</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">David Salazar</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../archive.html">
 <span class="menu-text">Posts</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/David-Salazar"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/DavidSalazarVir"><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Statistical Rethinking: Week 5 -&gt; Interactions</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">May 12, 2020</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#statisical-rethinking-week-5---interactions" id="toc-statisical-rethinking-week-5---interactions" class="nav-link active" data-scroll-target="#statisical-rethinking-week-5---interactions">Statisical Rethinking: Week 5 -&gt; Interactions</a>
  <ul class="collapse">
  <li><a href="#chapter-8-problems" id="toc-chapter-8-problems" class="nav-link" data-scroll-target="#chapter-8-problems">Chapter 8 Problems</a>
  <ul class="collapse">
  <li><a href="#problem-1" id="toc-problem-1" class="nav-link" data-scroll-target="#problem-1">Problem 1</a></li>
  <li><a href="#problem-2" id="toc-problem-2" class="nav-link" data-scroll-target="#problem-2">Problem 2</a></li>
  </ul></li>
  <li><a href="#problem-3-language-diversity" id="toc-problem-3-language-diversity" class="nav-link" data-scroll-target="#problem-3-language-diversity">Problem 3: Language Diversity</a></li>
  </ul></li>
  </ul>
</nav>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="statisical-rethinking-week-5---interactions" class="level1">
<h1>Statisical Rethinking: Week 5 -&gt; Interactions</h1>
<p>As Richard says in class, interactions are easy to code but incredibly difficult to interpret. By going through the problems in Chapter 8, I hope to gain a bit of practice working with them.</p>
<section id="chapter-8-problems" class="level2">
<h2 class="anchored" data-anchor-id="chapter-8-problems">Chapter 8 Problems</h2>
<section id="problem-1" class="level3">
<h3 class="anchored" data-anchor-id="problem-1">Problem 1</h3>
<p>Let’s run the tulips model but this time with the bed variable. Given that this is a categorical variable, it will create a different intercept for each of the beds in the sample.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>            mean         sd        5.5%       94.5%
a[1]   0.1216469 0.03061961  0.07271085  0.17058296
a[2]   0.1782907 0.02439658  0.13930026  0.21728116
a[3]   0.2406134 0.03059111  0.19172287  0.28950387
bw     0.2072015 0.02671180  0.16451091  0.24989215
bs    -0.1725240 0.03737034 -0.23224906 -0.11279901
bws   -0.1436491 0.03261954 -0.19578146 -0.09151679
sigma  0.1139477 0.01548856  0.08919395  0.13870138</code></pre>
</div>
</div>
<p>Our model is swayed by the different intercepts given to each bed, as they seem to capture valuable variation. Now, let’s compare it with a model that omits bed.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                  WAIC        SE    dWAIC      dSE    pWAIC    weight
model_wo_bed -22.60634 10.046650 0.000000       NA 6.291139 0.7254267
model_bed    -20.66326  9.993276 1.943084 5.996111 9.575747 0.2745733</code></pre>
</div>
</div>
<p>Most of the weight seems to go the model with bed. However, given the lack of data, there’s too much uncertainty around the difference in WAIC between the 2 models.</p>
</section>
<section id="problem-2" class="level3">
<h3 class="anchored" data-anchor-id="problem-2">Problem 2</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>            mean          sd        5.5%       94.5%
a[1]   0.8865695 0.015675627  0.86151687  0.91162223
a[2]   1.0505715 0.009936555  1.03469096  1.06645202
b[1]   0.1325113 0.074204079  0.01391882  0.25110372
b[2]  -0.1425710 0.054749136 -0.23007065 -0.05507126
sigma  0.1094936 0.005935223  0.10000792  0.11897919</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>             mean          sd        5.5%      94.5%
a[1]   0.87962099 0.015965119  0.85410565  0.9051363
a[2]   1.05057837 0.009858793  1.03482212  1.0663346
b[1]   0.06787769 0.081004059 -0.06158244  0.1973378
b[2]  -0.14265391 0.054330616 -0.22948473 -0.0558231
sigma  0.10862806 0.005905093  0.09919058  0.1180655</code></pre>
</div>
</div>
<p>As expected, the slope for the african countries decreased. Where its 89% PI went from (0.01, 0.25) to (-0.06, 0.2). Whereas the rest of the parameters are unchanged, as expected. Were we fitting a multi-level model, the slope for non african countries would have also possibly changed.</p>
<p>Let’s plot what this means:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="2020-05-12-statistical-rethinking-week-5-interactions_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Now let’s add europe into the mix for the model without Seychelles:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="2020-05-12-statistical-rethinking-week-5-interactions_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Whereas before</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="2020-05-12-statistical-rethinking-week-5-interactions_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Although the model has lost confidence in the relationship between rugedness and log(gdp) for african countries for high levels of ruggedness, the model still allows us to be confident of a positive relationship between ruggedness and log(gdp) at lower levels. We can see this more clearly with the following plots where we analyze the expected difference between countries at different levels of ruggeddness:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="2020-05-12-statistical-rethinking-week-5-interactions_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Dropping Seychelle shrinks the expected difference between continents at all levels of ruggedness; however, the effect is stronger at the largest levels of ruggeddness.</p>
</section>
</section>
<section id="problem-3-language-diversity" class="level2">
<h2 class="anchored" data-anchor-id="problem-3-language-diversity">Problem 3: Language Diversity</h2>
<p>Is language diversity a product of food security?</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>              mean         sd       5.5%       94.5%
a       -3.6241843 0.93057731 -5.1114266 -2.13694206
growing  1.3256627 0.53695659  0.4675024  2.18382305
c       -0.1410468 0.07128679 -0.2549769 -0.02711674
sigma    1.3846357 0.11311750  1.2038521  1.56541928</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="2020-05-12-statistical-rethinking-week-5-interactions_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>It seems that the effect of growing seasons length, adjusting for area, is positive. The higher the mean growing season, the larger the log of languages per caput.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                mean         sd       5.5%       94.5%
a         -3.4989509 0.94653229 -5.0116924 -1.98620953
sdgrowing -0.8468873 0.69645186 -1.9599519  0.26617726
c         -0.1493849 0.07265783 -0.2655061 -0.03326362
sigma      1.4337800 0.11691787  1.2469227  1.62063737</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="2020-05-12-statistical-rethinking-week-5-interactions_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>It also seems that the standard deviation has a negative effect on the logarithm of the languages per caput. However, this effect has a higher level of uncertainty associated to it.</p>
<p>Now, let’s consider the interaction between the volatility in growing season and the mean duration of the growing season.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                    mean         sd       5.5%        94.5%
a           -3.919031711 0.94832455 -5.4346375 -2.403425917
growing      1.380821711 0.53151914  0.5313515  2.230291955
sdgrowing   -0.980589705 0.68086964 -2.0687509  0.107571483
c           -0.117471256 0.07280641 -0.2338300 -0.001112548
interaction -0.007921323 0.09996142 -0.1676790  0.151836327
sigma        1.357910739 0.11154742  1.1796364  1.536185063</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                WAIC       SE    dWAIC      dSE    pWAIC     weight
model_three 265.2903 16.57336 0.000000       NA 4.477261 0.70292510
model_one   267.2050 16.28920 1.914699 1.984100 4.002462 0.26985934
model_two   271.7932 17.04332 6.502923 3.777558 3.826063 0.02721556</code></pre>
</div>
</div>
<p>The leading variable seems to be mean growing season. As the model that considers it alone seems to capture all importation variation and its predictions are basically equivalent to those of the model that considers all terms (model3).</p>


</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div quarto-reuse="quarto-reuse" class="quarto-appendix-contents"><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>